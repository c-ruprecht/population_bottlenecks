import os
from snakemake.io import expand, directory
import re
# First, add this import at the top of your file
import glob


# PATHS
OUTPUT_DIR = '/sc/arion/work/ruprec01/results/P4C2-run1-R2/'  


# Create main output directory structure
os.makedirs(OUTPUT_DIR + "4-moleculetables", exist_ok=True)


STRAINS="ST1,ST2,ST4,ST5,ST6"
SAMPLE_NAMES = STRAINS.split(",")

rule all:
    input:
        OUTPUT_DIR + "4-moleculetables/molecule_table.done",
        expand(OUTPUT_DIR + "5-FP/{strain}/{strain}.FP_complete.done", strain=SAMPLE_NAMES),
        

# first run gen dist for mgdmeta files in umi_tools_env
python /Users/ruprec01/Documents/Faith_lab/Git/population_bottlenecks/scripts/majoritydistance.py \
-rt /Volumes/sd/faith/MTCSB/projects/P4-barcoding_strains/r2_data/P4C1T8/FP/c1_ST1/FrequenciesWithoutNoise.csv \
-n P4C1T8-cage1-ST1 \
-m /Users/ruprec01/Documents/Faith_lab/Git/population_bottlenecks/input_files/gd_sheets/P4C1T8/ST1_gdmeta.csv \
-l 10000 \
-o /Users/ruprec01/Documents/Faith_lab/Git/population_bottlenecks/input_files/gd_sheets/P4C1T8

#then run create_heatmaps